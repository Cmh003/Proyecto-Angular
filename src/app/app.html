<div class="container">
  <h1>{{ title }}</h1>

  <div class="input-section">
    <input 
      type="text" 
      [(ngModel)]="newTodoText" 
      (keyup.enter)="addTodo()"
      [class.error]="newTodoText.length > 100"
      placeholder="Nueva tarea..."
      maxlength=100>
      
    <button (click)="addTodo()" [disabled]="newTodoText.trim() === ''">Añadir</button>
  </div>
  
  <div class="input-info">
    <small>{{ newTodoText.length }} / 100</small>
    <span *ngIf="newTodoText.length > 100" class="error-msg">Máximo 100 caracteres</span>
  </div>

  <div class="filters">
    <button [class.active]="currentFilter === 'all'" (click)="currentFilter = 'all'">Todas</button>
    <button [class.active]="currentFilter === 'active'" (click)="currentFilter = 'active'">Activas</button>
    <button [class.active]="currentFilter === 'completed'" (click)="currentFilter = 'completed'">Completadas</button>
  </div>

  <div *ngIf="todos.length === 0" class="empty-state">
    No hay tareas. ¡Añade una para empezar!
  </div>

  <ul *ngIf="todos.length > 0" class="todo-list">
    <app-todo-item 
      *ngFor="let t of getFilteredTodos()" 
      [todo]="t" 
      (delete)="deleteTodo($event)" 
      (toggle)="toggleTodo($event)">
    </app-todo-item>
  </ul>

  <div class="footer">
    <span>{{ getActiveCount() }} tareas pendientes</span>
    <button (click)="clearCompleted()">Limpiar completadas</button>
  </div>
</div>